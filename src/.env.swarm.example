# Names Manager - Docker Swarm Environment Configuration Example
# Copy this file to .env in the src/ directory for Swarm deployment

# IMPORTANT: For Swarm deployment, note the differences from Compose:
# - Frontend is published on port 80 (not 8080)
# - DB_URL must use service name 'db' for overlay network discovery
# - All environment variables must be set before deploying the stack

# Database Configuration
# Database credentials (change POSTGRES_PASSWORD for production!)
POSTGRES_USER=names_user
POSTGRES_PASSWORD=names_pass
POSTGRES_DB=namesdb

# Database Connection URL
# IMPORTANT: Must use service name 'db' for Swarm service discovery
DB_URL=postgresql+psycopg2://names_user:names_pass@db:5432/namesdb

# Application Configuration
# Maximum length for name field
MAX_NAME_LENGTH=50

# Server Configuration
# Host address (use 0.0.0.0 to listen on all interfaces)
SERVER_HOST=0.0.0.0

# Backend port (internal, not published externally)
SERVER_PORT=5000

# Frontend Configuration
# NOTE: Frontend is published on port 80 in Swarm mode (not configurable via env var)
# Access at: http://localhost or http://192.168.56.1
FRONTEND_PORT=80

# Logging Configuration
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Database Debugging
# Enable SQLAlchemy query logging (set to "true" for debugging)
DB_ECHO=false

# Swarm Deployment Notes:
# =====================
# 
# 1. Build images before deploying:
#    docker build -t names-manager-backend:latest ./backend
#    docker build -t names-manager-frontend:latest ./frontend
#
# 2. Ensure worker node has /var/lib/postgres-data directory:
#    ssh worker-node "sudo mkdir -p /var/lib/postgres-data && sudo chown -R 999:999 /var/lib/postgres-data"
#
# 3. Deploy the stack:
#    docker stack deploy -c swarm/stack.yaml names-app
#
# 4. Verify deployment:
#    docker service ls
#    docker service ps names-app_frontend
#    docker service ps names-app_backend
#    docker service ps names-app_db
#
# 5. Access the application:
#    Frontend: http://localhost
#    API Health: http://localhost/api/healthz
